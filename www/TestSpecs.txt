-- format is a bit awkward because Haskell's read is not very powerful
-- note that comments have to start at the beginning of the line
  
-- Note: Ampersand and Prototype use exit code 1 to signal a fatal error. Other errors yield higher exit codes.

[ TestSpec
     { getTestExecutable = Ampersand, getTestArgs = [], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs = 
         [ "ampersand-models/Simple"
--       , "ampersand/AmpersandData/RepoRap/RAP.adl"
         , "ampersand/AmpersandData/FormalAmpersand/FormalAmpersand.adl"
         , "ampersand/AmpersandData/FormalAmpersand/ADLTool.adl"
         , "ampersand-models/Mandatering/ToevoegenMandaat.adl"
         , "ampersand-models/Misc"
         , "ampersand-models/INDOORS/INDOORS.adl"
         , "ampersand-models/INDOORS/overzichten/uitgangsscripts/VIROarch.adl"
         , "ampersand-models/VOGDemo/DEMO_VOG.adl"
--       , "ampersand-models/Bugs/Fixed"
         ]
     }
, TestSpec 
     { getTestExecutable = Ampersand, getTestArgs = ["--haskell"], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs = 
         [ "ampersand-models/Simple"
         , "ampersand-models/Misc"
         , "ampersand-models/Tests/ShouldSucceed"
         , "ampersand-models/INDOORS/INDOORS.adl"
         , "ampersand-models/Bugs/Fixed"
         ]
     }
, TestSpec 
     { getTestExecutable = Prototype, getTestArgs = ["--validate"], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs = 
         [ "ampersand-models/Simple"
         , "ampersand-models/Misc"
         , "ampersand-models/Tests/ShouldSucceed"
         , "ampersand-models/INDOORS/INDOORS.adl"
         , "ampersand-models/Bugs/Fixed"
         ]
     }

-- prototype type-check tests (leaving out --validate automatically builds prototype, --dev means violations are allowed)
, TestSpec 
     { getTestExecutable = Prototype, getTestArgs = ["--dev"], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs = 
         [ "ampersand-models/Tests/ShouldSucceed"
         , "ampersand-models/INDOORS/INDOORS.adl"
         , "ampersand-models/Bugs/Fixed"
         ]
     }

-- prototype build tests for showcasing in http://sentinel.oblomov.com/www/ampersand/
, TestSpec 
     { getTestExecutable = Prototype, getTestArgs = ["--refresh=5"], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs = 
         [ "ampersand-models/Simple"
         , "ampersand-models/Misc"
         , "ampersand-models/INDOORS/DemoBeslissingen.adl"
         , "ampersand-models/INDOORS/DemoLamicie301.adl"
         , "ampersand-models/INDOORS/DemoLamicieCode105.adl"
         , "ampersand-models/INDOORS/DemoLamicieCode106.adl"
         , "ampersand-models/INDOORS/DemoLamicieCode303.adl"
         , "ampersand-models/INDOORS/DemoLamicieCode701.adl"
         , "ampersand-models/INDOORS/DemoLamicieCode702.adl"
         , "ampersand-models/INDOORS/DemoLamicieCode703.adl"
         , "ampersand-models/INDOORS/DemoLamicieCode708.adl"
         , "ampersand-models/INDOORS/DemoRaadRechtsbijstand.adl"
         , "ampersand-models/INDOORS/DemoRegisters.adl"
         , "ampersand-models/INDOORS/DemoStrafblad.adl"
         , "ampersand-models/INDOORS/DemoZittinggegevens.adl"
         , "ampersand-models/VOGDemo/DEMO_VOG_Dummy.adl"
--         , "ampersand-models/VOGDemo/DEMO_VOG.adl"
-- By testing this dummy, we still get a sentinel failure, but without the 4 minute delay that VOG_Demo prototype generation causes 
-- (due to a normalizer bug, see https://sourceforge.net/p/ampersand/tickets/451)
         ]
     }

-- explicit tests (for Ampersand parser and typechecker only)
, TestSpec
     { getTestExecutable = Ampersand, getTestArgs = [], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs =
         [ "ampersand-models/Tests/ShouldSucceed"
         ]
     }
, TestSpec
     { getTestExecutable = Ampersand, getTestArgs = [], getPanicExitCodes = [1], getDesiredOutcome = ShouldFail
     , getTestFileSpecs =
         [ "ampersand-models/Tests/ShouldFail"
         ]
     }

-- known bugs: consider putting “ShouldFail” for known bugs, such that we’ll be notified when they get fixed.
, TestSpec
     { getTestExecutable = Ampersand, getTestArgs = [], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs =
         [ "ampersand-models/Bugs/Current/Other"
         ]
     }
, TestSpec 
     { getTestExecutable = Prototype, getTestArgs = ["--validate"], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs = 
         [ "ampersand-models/Bugs/Current/SQL"
         , "ampersand-models/Bugs/Current MultiFile/Bug388_Retina/RETINABUG.adl"
         , "ampersand-models/Tests/NoSentinel/Issue191Test.adl"
     }
, TestSpec 
     { getTestExecutable = Prototype, getTestArgs = ["--validate"], getPanicExitCodes = [1], getDesiredOutcome = ShouldFail
     , getTestFileSpecs = 
         [ "ampersand-models/Bugs/Current/SQLFail"
         ]
     }
---- Formal Ampersand and Generics (Meta-ampersand stuff) ----
, TestSpec
     { getTestExecutable = Ampersand, getTestArgs = ["--ast-file"], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs = 
         [ "ampersand-models/INDOORS/INDOORS.adl"
         ]
     }

---- New frontend ----

, TestSpec 
     { getTestExecutable = Prototype, getTestArgs = ["--newFrontend"], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs = 
         [ "ampersand-models/NewFrontend/WebWijzer/WebWijzer.adl"
         , "ampersand-models/NewFrontend/GenerationTest/InterfaceShowcase.adl"
--         , "ampersand-models/NewFrontend/FancyViews/FancyViews.adl"
         ]
     }

---- Edit validation ----

-- First build the prototype:
, TestSpec 
     { getTestExecutable = Prototype, getTestArgs = ["--refresh=5"], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs = 
         [ "ampersand-models/ISAtest/Limorange.adl"
         ]
     }

-- Then run some validation tests:
, TestSpec 
     { getTestExecutable = Prototype, getTestArgs = ["--validateEdit=Limorange-EditValidation/AddOwnedCitrus"], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs = 
         [ "ampersand-models/ISAtest/Limorange.adl"
         ]
     }
, TestSpec 
     { getTestExecutable = Prototype, getTestArgs = ["--validateEdit=Limorange-EditValidation/AddOwnedLimorange"], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs = 
         [ "ampersand-models/ISAtest/Limorange.adl"
         ]
     }


-- NVWA DTV Prototype (In normal location, for daily checking. This is not a secure directory, but it can only be found if actively looked for.)

, TestSpec 
     { getTestExecutable = Prototype, getTestArgs = ["--refresh=5"], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs = 
         [ "ampersand-models/NVWA DTV/DTV.adl"
         ]
     }

---- Compile NVWA DTV model to secure directory (which can be shared with others) ----

-- Latex: https://sentinel.tarski.nl/ampersand/NVWA/FSpec/DTV.pdf
,  TestSpec
     { getTestExecutable = Ampersand, getTestArgs = ["--fspec=latex", "--outputDir=/home/sentinel/git/sentinel/www/ampersand/NVWA/FSpec"], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs =
         [ "ampersand-models/NVWA DTV/DTV.adl"
         ]
     }
     
-- RTF: https://sentinel.tarski.nl/ampersand/NVWA/FSpec/DTV.rtf
, TestSpec
     { getTestExecutable = Ampersand, getTestArgs = ["--fspec=rtf", "--outputDir=/home/sentinel/git/sentinel/www/ampersand/NVWA/FSpec"], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
     , getTestFileSpecs =
         [ "ampersand-models/NVWA DTV/DTV.adl"
         ]
     }


-- Uitgecommentaard, omdat ik een stabiele versie nodig heb...  (SJ, 16 dec 2014) 
-- Prototype: https://sentinel.tarski.nl/ampersand/NVWA
--, TestSpec 
--     { getTestExecutable = Prototype, getTestArgs = ["--refresh=5", "--proto=/home/sentinel/git/sentinel/www/ampersand/NVWA"], getPanicExitCodes = [1], getDesiredOutcome = ShouldSucceed
--     , getTestFileSpecs = 
--         [ "ampersand-models/NVWA DTV/DTV.adl"
--         ]
--     }
]
